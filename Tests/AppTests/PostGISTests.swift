//
//  File.swift
//  
//
//  Created by Michael Helmbrecht on 06.07.21.
//

@testable import App
import XCTVapor
import FluentPostGIS
import WKCodable



final class PostGISTests: XCTestCase {
  func testHelloWorld() throws {
//    let app = Application(.testing)
//    // 3
//    defer { app.shutdown() }
//    // 4
//    try configure(app)
//    try app.autoRevert().wait()
//    try app.autoMigrate().wait()
//    
//    let point1 = GeographicPoint2D(longitude: 10.42622633681657, latitude: 51.909575619490916)
//    let point2 = GeographicPoint2D(longitude: 10.426269308514238, latitude: 51.909465831118)
//    
//    let location1 = LocationTest(location: point1)
//    let location2 = LocationTest(location: point2)
//    try location1.save(on: app.db).wait()
//    try location2.save(on: app.db).wait()
//    
//    let all = LocationTest.query(on: app.db).all()
//    print(try all.wait().count)
//    let search = try LocationTest.query(on: app.db).filterGeometryDistanceWithin(\.$location, point1, 13).all().wait()
//    print(search)
////    print(search.map{$0.location.geometry.latitude})
//    print(search.first?.location.latitude)
    
  }
}

